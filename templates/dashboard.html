{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="card summary-card income">
      <h3>Total Income</h3>
      <p id="incomeCard">₹0</p>
    </div>
    <div class="card summary-card expense">
      <h3>Total Expenses</h3>
      <p id="expenseCard">₹0</p>
    </div>
    <div class="card summary-card net">
      <h3>Net Flow</h3>
      <p id="netCard">₹0</p>
    </div>
  </div>

  <!-- Add Transaction -->
  <div class="dashboard-section">
    <h2>Add Transaction</h2>
    <form id="transactionForm" class="form-group">
      <input type="number" name="amount" placeholder="Amount (₹)" step="0.01" required>
      <select name="type" required>
        <option value="">Type</option>
        <option value="income">💰 Income</option>
        <option value="expense">💸 Expense</option>
      </select>
      <select name="category" required>
        <option value="">Category</option>
        <option value="Food">🍔 Food</option>
        <option value="Transport">🚌 Transport</option>
        <option value="Shopping">🛍️ Shopping</option>
        <option value="Salary">💼 Salary</option>
        <option value="Other">📦 Other</option>
      </select>
      <input type="date" name="date" required>
      <button type="submit" class="btn">Add</button>
    </form>
  </div>

  <!-- Budget Section -->
  <div class="dashboard-section">
    <h2>Set Budget</h2>
    <form id="budgetForm" class="form-group">
      <select name="category" required>
        <option value="">Category</option>
        <option value="Food">🍔 Food</option>
        <option value="Transport">🚌 Transport</option>
        <option value="Shopping">🛍️ Shopping</option>
        <option value="Salary">💼 Salary</option>
        <option value="Other">📦 Other</option>
      </select>
      <input type="number" name="limit" placeholder="Limit (₹)" step="0.01" required>
      <button type="submit" class="btn">Set</button>
    </form>
    <div id="budgetProgress" class="budget-progress-list"></div>
  </div>

  <!-- Charts -->
  <div class="dashboard-section">
    <h2>Expenses Chart</h2>
    <div class="chart-container">
      <canvas id="expenseChart"></canvas>
    </div>
  </div>

  <!-- Transactions Table -->
  <div class="dashboard-section">
    <h2>Transactions</h2>
    <div class="table-container">
      <table class="transactions-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Type</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="transactionsTable"></tbody>
      </table>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
{% endblock %}
